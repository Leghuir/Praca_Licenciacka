@using MojDziennikv4.Models.DAL
@model IEnumerable<MojDziennikv4.Models.Account>

@{
    Layout = null;
    bool udane = true;
}

<!DOCTYPE html>

<html>
<head>
    @Styles.Render("~/Content/css")
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
	<link rel="stylesheet" href="css/style.css">
    @{ 
        
            int i = PersonAccount.checkpasses(ViewBag.hlp.db, ViewBag.hlp.Login, ViewBag.hlp.Password, ViewBag.hlp.Type);
            switch (i)
            {
                case 3:
    <meta http-equiv="Refresh" content="0; url=/Home/Index" />; ViewBag.hlp.Type = "Unknow"; PersonAccount.getInstance().IsAuthenticated = true;  break;
            case 2:
    <meta http-equiv="Refresh" content="0; url=/Home/AsPupil" />; ViewBag.hlp.Type = "Unknow"; PersonAccount.getInstance().IsAuthenticated = true; break;
            case 1:
    <meta http-equiv="Refresh" content="0; url=/Home/AsTeacher" />; ViewBag.hlp.Type = "Unknow"; PersonAccount.getInstance().IsAuthenticated = true; break;

        }

        if (ViewBag.hlp.Type != "Unknow")
        {
            udane = false;
        }

        }
</head>
<body>
	<div class='selection'>
	<div class='left'>
		<p class="option" id="dyrektor">Dyrektor</p>
		<p class="option" id="sekretariat">Sekretariat</p>
		<p class="option selected" id="administrator">Administrator</p>
	</div>
   	 <div id='panellog'>
		<p class='message'>Logujesz się jako: Administrator</p>
		<form action="~/Login/Index" method=post>
			<p><input name="frm_login" type="text" placeholder="Login"></p>
			<p><input name="frm_password" type="password" placeholder="Hasło"></p>
			<select name="sel_type" hidden>
				<option id='administrator' value=@MojDziennikv4.Models.AccountType.Administrator>@MojDziennikv4.Models.AccountType.Administrator</option>
				<option id='dyrektor' value=@MojDziennikv4.Models.AccountType.Dyrektor>@MojDziennikv4.Models.AccountType.Dyrektor</option>
				<option id='nauczyciel' value=@MojDziennikv4.Models.AccountType.Nauczyciel>@MojDziennikv4.Models.AccountType.Nauczyciel</option>
				<option id='opiekun' value=@MojDziennikv4.Models.AccountType.Opiekun>@MojDziennikv4.Models.AccountType.Opiekun</option>
				<option id='sekretariat' value=@MojDziennikv4.Models.AccountType.Sekretariat>@MojDziennikv4.Models.AccountType.Sekretariat</option>
				<option id='uczen' value=@MojDziennikv4.Models.AccountType.Uczen>@MojDziennikv4.Models.AccountType.Uczen</option>
			</select>
			<input value="Zaloguj się" type="submit">
		</form>
	</div>
	<div class='right'>
		<p class="option" id="uczen">Uczeń</p>
		<p class="option" id="nauczyciel">Nauczyciel</p>
		<p class="option" id="opiekun">Opiekun</p>
	</div>
	<p class="error">Podano błędne dane logowania</p>
</div>

<script src='js/jquery.min.js'></script>
<script src="js/index.js"></script>

@if (!udane){
        <script type="text/javascript">
            $(".error").stop().animate(
                {
                    top: "-40px"
                },
                "fast"
            );
            $(".error").delay(1500).animate(
                {
                    top: "0px"
                },
                "fast"
            );
        </script>
}

</body>
</html>
